2. Error Correction (2m)</h3>
                    <p style="font-size:0.8em; margin:5px 0;">Edit with a pen.</p>
                    <div style="display:flex; flex-direction:column; gap:15px; margin-top:10px;"><div class="grammar-sent">1. She is very diligent person.</div>
<div class="grammar-sent">2. I am admire him very much.</div>
<div class="grammar-sent">3. He has a heart of golding.</div>
<div class="grammar-sent">4. We are friends since 10 years.</div>
<div class="grammar-sent">5. He encourage me to study hard.</div>
</div>
                </div>
            </div>

            <div class="card" style="flex-grow:1; border-left:5px solid var(--hw-accent);">
                <h3>3. Writing Task: Describe a time your family member helped you. (Write 50 words)</h3>
                <div class="diff-box"><strong>Instructions:</strong> Write your answer including one idiom and one 3 clause sentence. Take a photo of your answer and use your AI to correct your work and rewrite your polished answer.</div>

                <div style="display:flex; flex-direction:column; gap:10px; margin-top:10px;">
                    <div style="border:1px solid #eee; padding:10px; border-radius:6px; background:var(--bg-pastel-green);">
                        <strong>Draft:</strong>
                        <div class="lines" style="height:120px;"></div>
                    </div>
                    <div style="border:1px solid #eee; padding:10px; border-radius:6px; background:var(--bg-pastel-green);">
                        <strong>Polished Rewrite:</strong>
                        <div class="lines" style="height:120px;"></div>
                    </div>
                </div>
            </div>

            <div class="card" style="background:#eafaf1; border:2px dashed var(--hw-accent); text-align:center; padding:15px;">
                <h3 style="color:var(--hw-accent); margin:0;">ğŸ™ï¸ 4. Recording Challenge (10m)</h3>
                <p style="font-size:0.9em; margin:5px 0;">Record on <strong>portable MP3 players</strong> (One continuous file). Submit to teacher.</p>
                <div style="display:flex; justify-content:center; gap:20px; font-size:0.85em; font-weight:bold;">
                    <span>1. Part 2 X 2 Qs from lesson 1 (4m)</span>
                    <span>2. Part 3 X 3 Qs from lesson 2 (6m)</span>
                </div>
            </div>

            <div style="text-align:center; transform:rotate(180deg); color:#555; font-weight:bold; font-size:0.8em; margin-top:auto;">
                Key: 1. Diligent-A, 2. Inspiring-B, 3. Selfless-C, 4. Accomplished-D, 5. Considerate-E | 1. a very... 2. admire... 3. gold... 4. have been... 5. encourages...</div>
        </div>
    </div>

<script>
    window.onload = function() {
        // Elements
        const elA = document.getElementById('p5-q1');
        const elB = document.getElementById('p6-q1-cont');
        const elC = document.getElementById('p6-q2');
        const elD = document.getElementById('p6-q3');
        const elBanner = document.getElementById('p6-banner');
        const page6 = document.getElementById('page6');

        if (!elA || !elB || !elC || !elD || !page6) return;

        // 1. Get Height A (Q1 on Page 5)
        const heightA = elA.getBoundingClientRect().height;
        console.log("Height A:", heightA);

        // RESET STEP: Collapse B and C momentarily to allow D to expand to natural height
        // This prevents measuring D when it might be compressed by flex layout
        elB.style.height = "10px";
        elC.style.height = "10px";
        elB.style.flex = "none";
        elC.style.flex = "none";

        // Force reflow/repaint is usually automatic before next line, but we trust the engine
        // Now measure

        // 2. Calculate Available Space on Page 6 for B and C
        const headerHeight = page6.querySelector('.header-bar').getBoundingClientRect().height;
        const bannerHeight = elBanner.getBoundingClientRect().height;
        const heightD = elD.getBoundingClientRect().height; // Natural height

        // Get Page 6 content area height (excluding padding)
        const style = window.getComputedStyle(page6);
        const p6Padding = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);
        const p6Height = page6.getBoundingClientRect().height;
        const contentHeight = p6Height - p6Padding;

        // Assume 4 gaps of 15px (default gap in CSS)
        const gap = 15;
        // Increased safety buffer to strictly prevent overflow
        const safetyBuffer = 40;
        const totalGaps = 4 * gap + safetyBuffer;

        const availableForBC = contentHeight - headerHeight - bannerHeight - heightD - totalGaps;
        console.log("Available for B+C:", availableForBC);

        // 3. Solve Equations
        // B + C = availableForBC
        // C = A + B
        // => B + (A + B) = availableForBC
        // => 2B + A = availableForBC
        // => 2B = availableForBC - A
        // => B = (availableForBC - A) / 2

        let heightB = (availableForBC - heightA) / 2;

        // Safety check: Ensure B is not too small
        if (heightB < 50) heightB = 50;

        const heightC = availableForBC - heightB;

        console.log("Calculated Height B:", heightB);
        console.log("Calculated Height C:", heightC);

        // 4. Apply Heights
        elB.style.height = heightB + "px";
        elC.style.height = heightC + "px";
    };
</script>
</body>
</html>
2. Error Correction (2m)</h3>
                    <p style="font-size:0.8em; margin:5px 0;">Edit with a pen.</p>
                    <div style="display:flex; flex-direction:column; gap:15px; margin-top:10px;"><div class="grammar-sent">1. She is very diligent person.</div>
<div class="grammar-sent">2. I am admire him very much.</div>
<div class="grammar-sent">3. He has a heart of golding.</div>
<div class="grammar-sent">4. We are friends since 10 years.</div>
<div class="grammar-sent">5. He encourage me to study hard.</div>
</div>
                </div>
            </div>

            <div class="card" style="flex-grow:1; border-left:5px solid var(--hw-accent);">
                <h3>3. Writing Task: Describe a time your family member helped you. (Write 50 words)</h3>
                <div class="diff-box"><strong>Instructions:</strong> Write your answer including one idiom and one 3 clause sentence. Take a photo of your answer and use your AI to correct your work and rewrite your polished answer.</div>

                <div style="display:flex; flex-direction:column; gap:10px; margin-top:10px;">
                    <div style="border:1px solid #eee; padding:10px; border-radius:6px; background:var(--bg-pastel-green);">
                        <strong>Draft:</strong>
                        <div class="lines" style="height:120px;"></div>
                    </div>
                    <div style="border:1px solid #eee; padding:10px; border-radius:6px; background:var(--bg-pastel-green);">
                        <strong>Polished Rewrite:</strong>
                        <div class="lines" style="height:120px;"></div>
                    </div>
                </div>
            </div>

            <div class="card" style="background:#eafaf1; border:2px dashed var(--hw-accent); text-align:center; padding:15px;">
                <h3 style="color:var(--hw-accent); margin:0;">ğŸ™ï¸ 4. Recording Challenge (10m)</h3>
                <p style="font-size:0.9em; margin:5px 0;">Record on <strong>portable MP3 players</strong> (One continuous file). Submit to teacher.</p>
                <div style="display:flex; justify-content:center; gap:20px; font-size:0.85em; font-weight:bold;">
                    <span>1. Part 2 X 2 Qs from lesson 1 (4m)</span>
                    <span>2. Part 3 X 3 Qs from lesson 2 (6m)</span>
                </div>
            </div>

            <div style="text-align:center; transform:rotate(180deg); color:#555; font-weight:bold; font-size:0.8em; margin-top:auto;">
                Key: 1. Reliable(å¯é )-B, 2. Essential(å¿…è¦)-A, 3. Genuine(çœŸè¯š)-C, 4. Conflict(å†²çª)-D, 5. Maintain(ç»´æŒ)-E | 1. helped... 2. known... 3. edged... 4. interactions...
            </div>
        </div>
    </div>

<script>
    window.onload = function() {
        // Elements
        const elA = document.getElementById('p5-q1');
        const elB = document.getElementById('p6-q1-cont');
        const elC = document.getElementById('p6-q2');
        const elD = document.getElementById('p6-q3');
        const elBanner = document.getElementById('p6-banner');
        const page6 = document.getElementById('page6');

        if (!elA || !elB || !elC || !elD || !page6) return;

        // 1. Get Height A (Q1 on Page 5)
        const heightA = elA.getBoundingClientRect().height;
        console.log("Height A:", heightA);

        // RESET STEP: Collapse B and C momentarily to allow D to expand to natural height
        // This prevents measuring D when it might be compressed by flex layout
        elB.style.height = "10px";
        elC.style.height = "10px";
        elB.style.flex = "none";
        elC.style.flex = "none";

        // Force reflow/repaint is usually automatic before next line, but we trust the engine
        // Now measure

        // 2. Calculate Available Space on Page 6 for B and C
        const headerHeight = page6.querySelector('.header-bar').getBoundingClientRect().height;
        const bannerHeight = elBanner.getBoundingClientRect().height;
        const heightD = elD.getBoundingClientRect().height; // Natural height

        // Get Page 6 content area height (excluding padding)
        const style = window.getComputedStyle(page6);
        const p6Padding = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);
        const p6Height = page6.getBoundingClientRect().height;
        const contentHeight = p6Height - p6Padding;

        // Assume 4 gaps of 15px (default gap in CSS)
        const gap = 15;
        // Increased safety buffer to strictly prevent overflow
        const safetyBuffer = 40;
        const totalGaps = 4 * gap + safetyBuffer;

        const availableForBC = contentHeight - headerHeight - bannerHeight - heightD - totalGaps;
        console.log("Available for B+C:", availableForBC);

        // 3. Solve Equations
        // B + C = availableForBC
        // C = A + B
        // => B + (A + B) = availableForBC
        // => 2B + A = availableForBC
        // => 2B = availableForBC - A
        // => B = (availableForBC - A) / 2

        let heightB = (availableForBC - heightA) / 2;

        // Safety check: Ensure B is not too small
        if (heightB < 50) heightB = 50;

        const heightC = availableForBC - heightB;

        console.log("Calculated Height B:", heightB);
        console.log("Calculated Height C:", heightC);

        // 4. Apply Heights
        elB.style.height = heightB + "px";
        elC.style.height = heightC + "px";
    };
</script>
</body>
</html>
